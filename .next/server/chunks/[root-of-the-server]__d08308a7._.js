module.exports=[5012,e=>e.a(async(a,s)=>{try{let a=await e.y("node-fetch-77c8c86ae6be5b7f");e.n(a),s()}catch(e){s(e)}},!0),1658,(e,a,s)=>{a.exports=e.x("rss-parser-20b16fd21a7c6589",()=>require("rss-parser-20b16fd21a7c6589"))},4868,(e,a,s)=>{a.exports=e.x("fs/promises",()=>require("fs/promises"))},1619,e=>e.a(async(a,s)=>{try{var t=e.i(5012),i=e.i(1658),r=e.i(4868),n=e.i(4747),l=a([t]);[t]=l.then?(await l)():l,"u">typeof process&&process.setMaxListeners&&process.setMaxListeners(20);let g=n.default.join(process.cwd(),"data"),d=n.default.join(g,"removedTags.json");async function o(){try{await r.default.mkdir(g,{recursive:!0});let e=await r.default.readFile(d,"utf8");return JSON.parse(e||"[]")}catch(e){if("ENOENT"===e.code)return[];return console.warn("readRemovedTags failed:",e.message||String(e)),[]}}n.default.join(g,"feeds.json");let p=new i.default,h=[{url:"https://news.google.com/rss/search?q=Limoges+municipales+2026&hl=fr&gl=FR&ceid=FR:fr",name:"Google News (Limoges municipales 2026)"},{url:"https://www.francebleu.fr/rss/infos.xml",name:"France Bleu"},{url:"https://news.google.com/rss/search?q=site:lepopulaire.fr+Limoges+municipales+2026&hl=fr&gl=FR&ceid=FR:fr",name:"Google News (Le Populaire - Limoges)"},{url:"https://news.google.com/rss/search?q=site:lepopulaire.fr+Haute-Vienne+municipales+2026&hl=fr&gl=FR&ceid=FR:fr",name:"Google News (Le Populaire - Haute-Vienne)"},{url:"https://news.google.com/rss/search?q=site:actu.fr+Limoges+municipales+2026&hl=fr&gl=FR&ceid=FR:fr",name:"Google News (Actu.fr - Limoges)"},{url:"https://france3-regions.francetvinfo.fr/nouvelle-aquitaine/rss",name:"France 3 Nouvelle Aquitaine"},{url:"https://news.google.com/rss/search?q=site:francebleu.fr+Limoges+municipales+2026&hl=fr&gl=FR&ceid=FR:fr",name:"Google News (France Bleu - Limoges)"},{url:"https://news.google.com/rss/search?q=élections+municipales+Limoges+2026&hl=fr&gl=FR&ceid=FR:fr",name:"Google News (élections municipales)"},{url:"https://news.google.com/rss/search?q=municipales+Limoges+candidats&hl=fr&gl=FR&ceid=FR:fr",name:"Google News (candidats Limoges)"}],f={"limoges.fr":["https://news.google.com/rss/search?q=site:limoges.fr+Limoges+municipales+2026&hl=fr&gl=FR&ceid=FR:fr","https://news.google.com/rss/search?q=Limoges+municipales+2026&hl=fr&gl=FR&ceid=FR:fr"],"lamontagne.fr":["https://news.google.com/rss/search?q=site:lamontagne.fr+Limoges+municipales+2026&hl=fr&gl=FR&ceid=FR:fr"],"francebleu.fr":["https://news.google.com/rss/search?q=site:francebleu.fr+Limoges+municipales+2026&hl=fr&gl=FR&ceid=FR:fr"],"lepopulaire.fr":["https://news.google.com/rss/search?q=site:lepopulaire.fr+Limoges+municipales+2026&hl=fr&gl=FR&ceid=FR:fr"],"actu.fr":["https://news.google.com/rss/search?q=site:actu.fr+Limoges+municipales+2026&hl=fr&gl=FR&ceid=FR:fr"]},v=new Map,b=new Set,w=["lepopulaire","le populaire","la montagne","lamontagne","france bleu","francebleu","actu.fr","france 3","france3","limoges.fr"];"u">typeof setInterval&&!e.g.__NEWS_CLEANUP_INTERVAL_SET&&(e.g.__NEWS_CLEANUP_INTERVAL_SET=!0,setInterval(function(){if(v.size>100){let e=Array.from(v.entries()).slice(-Math.floor(50));v.clear(),e.forEach(([e,a])=>v.set(e,a))}},6e5));let y=["linternaute.com","linternaute"];function u(e){return(e||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}async function c(e,a,s){let t=(v.get(e)||0)+1;if(v.set(e,t),console.warn(`Failed to fetch feed ${e} ${s||""} (failure ${t}/3)`),!(t<3))try{let s=new URL(e).hostname.replace(/^www\./,""),i=[];for(let e of Object.keys(f))s.includes(e)&&i.push(...f[e]);if(i.length>0){let t=0;for(let e of i)h.some(a=>a.url===e)||b.has(e)||(h.push({url:e,name:`Alternative for ${a||s}`}),v.set(e,0),t++,console.log(`Added alternative feed for ${s}: ${e}`));if(t>0){b.add(e),console.log(`Replaced ${e} with ${t} alternative feed(s).`);return}}try{let a=`https://news.google.com/rss/search?q=site:${s}+Limoges+municipales+2026&hl=fr&gl=FR&ceid=FR:fr`;if(!h.some(e=>e.url===a)&&!b.has(a)){h.push({url:a,name:`Generic alternative for ${s}`}),v.set(a,0),console.log(`Added generic alternative feed for ${s}: ${a}`),b.add(e);return}}catch(e){console.warn("Failed to add generic alternative for",s,e&&e.message?e.message:e)}b.add(e),console.warn(`Blacklisting feed ${e} after ${t} failures.`)}catch(a){console.warn("Error handling feed failure for",e,a&&a.message?a.message:a),b.add(e)}}let x=["limoges","mairie","municipales","élection","election","élections","elections","candidat","candidats","2026","limousin","haute vienne","haute-vienne","hautevienne","87","damien maudet","maudet","Albin Freychet","freychet","émile roger lombertie","emile roger lombertie","lombertie","thierry miguel","miguel","vincent léonie","vincent leonie","leonie"],R=["aixe sur vienne","aixe-sur-vienne","ambazac","arnac la poste","arnac-la-poste","augne","aureil","azat le ris","azat-le-ris","balledent","beaumont du lac","beaumont-du-lac","bellac","berneuil","bersac sur rivalier","bersac-sur-rivalier","bessines sur gartempe","bessines-sur-gartempe","beynac","blanzac","blond","boisseuil","bonnac la cote","bonnac-la-cote","bosmie l aiguille","bosmie-l aiguille","bosmie-l-aiguille","breuilaufa","bujaleuf","burgnac","bussiere galant","bussiere-galant","chaillac sur vienne","chaillac-sur-vienne","chalus","chamboret","champagnac la riviere","champagnac-la-riviere","champnetery","champsac","chaptelat","chateau chervix","chateau-chervix","chateauneuf la foret","chateauneuf-la-foret","chateauponsac","cheissoux","cheronnac","cieux","cognac la foret","cognac-la-foret","compreignac","condat sur vienne","condat-sur-vienne","coussac bonneval","coussac-bonneval","couzeix","cromac","cussac","dinsac","dompierre les eglises","dompierre-les-eglises","domps","dournazac","droux","eybouleuf","eyjeaux","eymoutiers","feytiat","flavignac","folles","fromental","gajoubert","glandon","glanges","gorre","isle","jabreilles les bordes","jabreilles-les-bordes","janailhac","javerdat","jouac","jourgnac","la bazeuge","la chapelle montbrandeix","la chapelle-montbrandeix","la croisille sur briance","la croisille-sur-briance","la croix sur gartempe","la croix-sur-gartempe","la geneytouse","la jonchere saint maurice","la jonchere-saint-maurice","la meyze","la porcherie","la roche l abeille","la roche-l abeille","la-bazeuge","la-chapelle-montbrandeix","la-croisille-sur-briance","la-croix-sur-gartempe","la-geneytouse","la-jonchere-saint-maurice","la-meyze","la-porcherie","la-roche-l-abeille","ladignac le long","ladignac-le-long","lauriere","lavignac","le buis","le chalard","le chatenet en dognon","le chatenet-en-dognon","le dorat","le palais sur vienne","le palais-sur-vienne","le-palais-sur vienne","le vigen","le-buis","le-chalard","le-chatenet-en-dognon","le-dorat","le-palais-sur-vienne","le-vigen","les billanges","les cars","les grands chezeaux","les grands-chezeaux","les salles lavauguyon","les salles-lavauguyon","les-billanges","les-cars","les-grands-chezeaux","les-salles-lavauguyon","limoges","linards","lussac les eglises","lussac-les-eglises","magnac bourg","magnac laval","magnac-bourg","magnac-laval","mailhac sur benaize","mailhac-sur-benaize","maisonnais sur tardoire","maisonnais-sur-tardoire","marval","masleon","meilhac","meuzac","moissannes","montrol senard","montrol-senard","mortemart","nantiat","nedde","neuvic entier","neuvic-entier","nexon","nieul","nouic","oradour saint genest","oradour sur glane","oradour sur vayres","oradour-saint-genest","oradour-sur-glane","oradour-sur-vayres","pageas","panazol","pensol","peyrat de bellac","peyrat le chateau","peyrat-de-bellac","peyrat-le-chateau","peyrilhac","pierre buffiere","pierre-buffiere","rancon","razes","rempnat","rilhac lastours","rilhac rancon","rilhac-lastours","rilhac-rancon","rochechouart","royeres","roziers saint georges","roziers-saint-georges","saillat sur vienne","saillat-sur-vienne","saint amand le petit","saint amand magnazeix","saint auvent","saint bazile","saint bonnet briance","saint bonnet de bellac","saint brice sur vienne","saint cyr","saint denis des murs","saint gence","saint genest sur roselle","saint georges les landes","saint germain les belles","saint gilles les forets","saint hilaire bonneval","saint hilaire la treille","saint hilaire les places","saint jean ligoure","saint jouvent","saint julien le petit","saint junien","saint junien les combes","saint just le martel","saint laurent les eglises","saint laurent sur gorre","saint leger la montagne","saint leger magnazeix","saint leonard de noblat","saint martial sur isop","saint martin de jussac","saint martin le mault","saint martin le vieux","saint martin terressus","saint mathieu","saint maurice les brousses","saint meard","saint ouen sur gartempe","saint pardoux le lac","saint paul","saint priest ligoure","saint priest sous aixe","saint priest taurion","saint sornin la marche","saint sornin leulac","saint sulpice lauriere","saint sulpice les feuilles","saint sylvestre","saint victurnien","saint vitte sur briance","saint yrieix la perche","saint yrieix sous aixe","saint-amand-le-petit","saint-amand-magnazeix","saint-auvent","saint-bazile","saint-bonnet-briance","saint-bonnet-de-bellac","saint-brice-sur-vienne","saint-cyr","saint-denis-des-murs","saint-gence","saint-genest-sur-roselle","saint-georges-les-landes","saint-germain-les-belles","saint-gilles-les-forets","saint-hilaire-bonneval","saint-hilaire-la-treille","saint-hilaire-les-places","saint-jean-ligoure","saint-jouvent","saint-julien-le-petit","saint-junien","saint-junien-les-combes","saint-just-le-martel","saint-laurent-les-eglises","saint-laurent-sur-gorre","saint-leger-la-montagne","saint-leger-magnazeix","saint-leonard-de-noblat","saint-martial-sur-isop","saint-martin-de-jussac","saint-martin-le-mault","saint-martin-le-vieux","saint-martin-terressus","saint-mathieu","saint-maurice-les-brousses","saint-meard","saint-ouen-sur-gartempe","saint-pardoux-le-lac","saint-paul","saint-priest-ligoure","saint-priest-sous-aixe","saint-priest-taurion","saint-sornin-la-marche","saint-sornin-leulac","saint-sulpice-lauriere","saint-sulpice-les-feuilles","saint-sylvestre","saint-victurnien","saint-vitte-sur-briance","saint-yrieix-la-perche","saint-yrieix-sous-aixe","sainte anne saint priest","sainte marie de vaux","sainte-anne-saint-priest","sainte-marie-de-vaux","sauviat sur vige","sauviat-sur-vige","sereilhac","solignac","surdoux","sussac","tersannes","thouron","val d issoire","val d oire et gartempe","val-d oire-et-gartempe","val-d-issoire","val-d-oire-et-gartempe","vaulry","vayres","verneuil moustiers","verneuil sur vienne","verneuil-moustiers","verneuil-sur-vienne","veyrac","vicq sur breuilh","vicq-sur-breuilh","videix","villefavard"],F=null;async function m(e=300,a=!1){let s=[],i=[],r="true"===(process.env.PREFER_DEPARTEMENT||"false").toString().toLowerCase();await Promise.all(h.map(async e=>{if(b.has(e.url))return void i.push({url:e.url,name:e.name,status:"blacklisted",httpStatus:null,itemsFound:0});try{let a=await (0,t.default)(e.url,{headers:{"User-Agent":"Mozilla/5.0 (X11; Linux) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120 Safari/537.36",Accept:"application/rss+xml, application/xml, text/xml, */*"}});if(!a.ok){await c(e.url,e.name,`Status code ${a.status}`),i.push({url:e.url,name:e.name,status:"error",httpStatus:a.status,itemsFound:0,error:`Status code ${a.status}`});return}let n=await a.text(),l=await p.parseString(n),m=(l.items||[]).map(a=>{var s;let t,i=a.title,r=a.contentSnippet||a.content||a.summary||"";return s=r,(t=e=>(u(e)||"").replace(/\s+/g," ").trim())(i)===t(s)&&(r=null),{title:i,description:r,url:a.link,source:e.name||l.title||new URL(e.url).hostname,publishedAt:a.isoDate||a.pubDate||null}}),g=(await o()).map(e=>u(e)),d=new Date(Date.now()-5184e6),h=m.map(e=>{var a;let s,t,i,n,l=(e.title||"")+" "+(e.description||""),o=function(e){let a=u(e),s=[];for(let e of(F||(F=[...new Set([...x,...R])]),F)){let t=u(e);t&&a.includes(t)&&s.push(e)}return[...new Set(s)]}(l),c=(o=o.filter(e=>{let a=u(e);return!g.some(e=>a.includes(e)||e.includes(a))})).length?o[0]:null;return Object.assign({},e,{matches:o,primaryMatch:c,score:(a=Object.assign({},e,{matches:o}),s=0,t=(a.source||"").toLowerCase(),w.some(e=>t.includes(e))&&(s+=120),i=(a.matches||[]).map(e=>u(e)),r&&i.some(e=>e.includes("haute vienne")||e.includes("haute-vienne")||e.includes("limousin")||e.includes("87"))&&(s+=200),s+=20*(a.matches||[]).length,a.url&&!a.url.includes("news.google.com")&&(s+=50),n=a.publishedAt?new Date(a.publishedAt).getTime()/1e12:0,s+=n,s+=(a.description||"").length/5e3)})}).filter(e=>{let a,s,t,i;if(a=(e.url||"").toLowerCase(),s=(e.source||"").toLowerCase(),t=(e.title||"").toLowerCase(),i=(e.description||"").toLowerCase(),y.some(e=>a.includes(e)||s.includes(e)||t.includes(e)||i.includes(e))||!e.publishedAt)return!1;let r=new Date(e.publishedAt);return!isNaN(r)&&!(r<d)&&e.matches&&e.matches.length>0});i.push({url:e.url,name:e.name,status:"ok",httpStatus:a.status,itemsFound:h.length}),s.push(...h)}catch(a){await c(e.url,e.name,a&&a.message?a.message:a),i.push({url:e.url,name:e.name,status:"error",httpStatus:null,itemsFound:0,error:a&&a.message?a.message:String(a)})}}));let n=s.filter(e=>e.publishedAt).slice().sort((e,a)=>(a.score||0)!==(e.score||0)?(a.score||0)-(e.score||0):new Date(a.publishedAt)-new Date(e.publishedAt));return a?{items:n.slice(0,e),reports:i}:n.slice(0,e)}e.s(["fetchRssFeeds",()=>m]),s()}catch(e){s(e)}},!1),299,e=>e.a(async(a,s)=>{try{var t=e.i(1619),i=a([t]);async function r(e,a){try{let s=parseInt(e.query.limit,10)||200,i=await (0,t.fetchRssFeeds)(s),r={},n=[];i.forEach(e=>{if(e.publishedAt){let a=new Date(e.publishedAt).toLocaleString("fr-FR",{month:"long",year:"numeric"});r[a]||(r[a]=[],n.push(a)),r[a].push(e)}}),a.status(200).json({articles:i,monthlyArticles:r,months:n})}catch(e){a.status(500).json({articles:[],monthlyArticles:{},months:[],error:e.message})}}[t]=i.then?(await i)():i,e.s(["default",()=>r]),s()}catch(e){s(e)}},!1),832,e=>e.a(async(a,s)=>{try{var t=e.i(6747),i=e.i(9245),r=e.i(4898),n=e.i(2950),l=e.i(299),o=e.i(7031),u=e.i(1927),c=e.i(6432),m=a([l]);[l]=m.then?(await m)():m;let d=(0,n.hoist)(l,"default"),p=(0,n.hoist)(l,"config"),h=new r.PagesAPIRouteModule({definition:{kind:i.RouteKind.PAGES_API,page:"/api/news",pathname:"/api/news",bundlePath:"",filename:""},userland:l,distDir:".next",relativeProjectDir:""});async function g(e,a,s){h.isDev&&(0,c.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let i="/api/news";i=i.replace(/\/index$/,"")||"/";let r=await h.prepare(e,a,{srcPage:i});if(!r){a.statusCode=400,a.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve());return}let{query:n,params:l,prerenderManifest:m,routerServerContext:g}=r;try{let s=e.method||"GET",t=(0,o.getTracer)(),r=t.getActiveScopeSpan(),c=h.instrumentationOnRequestError.bind(h),d=async r=>h.render(e,a,{query:{...n,...l},params:l,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:m.preview,propagateError:!1,dev:h.isDev,page:"/api/news",internalRevalidate:null==g?void 0:g.revalidate,onError:(...a)=>c(e,...a)}).finally(()=>{if(!r)return;r.setAttributes({"http.status_code":a.statusCode,"next.rsc":!1});let e=t.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=e.get("next.route");if(n){let e=`${s} ${n}`;r.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),r.updateName(e)}else r.updateName(`${s} ${i}`)});r?await d(r):await t.withPropagatedContext(e.headers,()=>t.trace(u.BaseServerSpan.handleRequest,{spanName:`${s} ${i}`,kind:o.SpanKind.SERVER,attributes:{"http.method":s,"http.target":e.url}},d))}catch(e){if(h.isDev)throw e;(0,t.sendError)(a,500,"Internal Server Error")}finally{null==s.waitUntil||s.waitUntil.call(s,Promise.resolve())}}e.s(["config",0,p,"default",0,d,"handler",()=>g]),s()}catch(e){s(e)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__d08308a7._.js.map